<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:model ="clr-namespace:RunPlan.Data"
             xmlns:viewmodel ="clr-namespace:RunPlan.ViewModel"
             xmlns:ios="clr-namespace:Microsoft.Maui.Controls.PlatformConfiguration.iOSSpecific;assembly=Microsoft.Maui.Controls"
              ios:Page.UseSafeArea="True"
             x:DataType="viewmodel:ActivityViewModel"
             x:Class="RunPlan.Model.Activity"
             BackgroundColor="#8260DA">




    <ScrollView>
        <VerticalStackLayout Padding="30" Spacing="25">

            <Grid ColumnDefinitions="Auto,*,Auto" Padding="0,0,0,10">
                <ImageButton Source="back.png"
                      Clicked="OnBackClicked"
                      BackgroundColor="Transparent"
                      HeightRequest="30"
                      WidthRequest="30"
                      Grid.Column="0"/>
                <Button Text="Save"
                 FontSize="14"
                 BackgroundColor="White"
                 TextColor="MediumPurple"
                 CornerRadius="10"
                 Command="{Binding AddActivityCommand}"
                 Grid.Column="2" />
            </Grid>
            
            <!-- Title -->
            <StackLayout Spacing="5" Margin="0,0,0,20">

                <Entry Text="{Binding ActivityName}"
				   FontSize="32"
				   TextColor="White"
				   FontAttributes="Bold"
				   HorizontalOptions="Center"
                       Placeholder="Activity name"/>
            </StackLayout>

            <!-- Info Grid (2x2 Boxes) -->
            <Grid ColumnDefinitions="Auto,Auto" 
                  RowDefinitions="Auto,Auto"
                  ColumnSpacing="5" 
                  RowSpacing="5"
                  HorizontalOptions ="Center"
                  Margin="0,0,0,30">

                <!-- Distance Box -->
                <Frame Grid.Row="0" Grid.Column="0"
				       BackgroundColor="#4E3689"
				       CornerRadius="12"
				       BorderColor="#4E3689"
				       HeightRequest="150"
				       WidthRequest="170"
				       HorizontalOptions="Center"
				       VerticalOptions="Center"
				       Padding="0"
				       HasShadow="False">
                    <Grid VerticalOptions="Center" HorizontalOptions="Center">
                        <VerticalStackLayout >
                            <Entry Text="{Binding DistanceText}"
							       FontSize="25"
							       WidthRequest="100"
                                   Keyboard="Numeric"
							       HorizontalTextAlignment="Center"
							       TextColor="White"
							       BackgroundColor="Transparent"
                                   Placeholder="0"
                                   PlaceholderColor="Gray"
                                   />
                            <Label Text="km"
							       FontSize="18"
							       TextColor="White"
							       HorizontalOptions="Center" />
                        </VerticalStackLayout>


                    </Grid>
                </Frame>



                <!-- Time Box -->
                <Frame Grid.Row="0" Grid.Column="1"
                       BackgroundColor="#4E3689"
                       CornerRadius="12"
                       BorderColor="#4E3689"
                       HeightRequest="150"
                       WidthRequest="170"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       Padding="10"
                       HasShadow="False">

                    <VerticalStackLayout Spacing="8" VerticalOptions="Center">
                        <HorizontalStackLayout Spacing="0" HorizontalOptions="Center">

                            <!-- Hours -->
                            <VerticalStackLayout Spacing="0" HorizontalOptions="Center">
                                <Picker ItemsSource="{Binding HourOptions}" 
                                        SelectedItem="{Binding SelectedHour}" 
                                        WidthRequest="50"
                                        TextColor="White"
                                        FontSize="25"
                                        BackgroundColor="Transparent" />
                                <Label Text="hh" TextColor="White" FontSize="18" HorizontalOptions="Center" />
                            </VerticalStackLayout>

                            <!-- Minutes -->
                            <VerticalStackLayout Spacing="0" HorizontalOptions="Center">
                                <Picker ItemsSource="{Binding MinuteOptions}" 
                                        SelectedItem="{Binding SelectedMinute}" 
                                        WidthRequest="50"
                                        TextColor="White"
                                        FontSize="25"
                                        BackgroundColor="Transparent" />
                                <Label Text="mm" TextColor="White" FontSize="18" HorizontalOptions="Center" />
                            </VerticalStackLayout>

                            <!-- Seconds -->
                            <VerticalStackLayout Spacing="0" HorizontalOptions="Center">
                                <Picker ItemsSource="{Binding SecondOptions}" 
                                        SelectedItem="{Binding SelectedSecond}" 
                                        WidthRequest="50"
                                        TextColor="White"
                                        FontSize="25"
                                        BackgroundColor="Transparent" />
                                <Label Text="ss" TextColor="White" FontSize="18" HorizontalOptions="Center" />
                            </VerticalStackLayout>

                        </HorizontalStackLayout>

                       
                    </VerticalStackLayout>
                </Frame>

                
                <!-- Date Box -->
                <Frame Grid.Row="1" Grid.Column="0"
				   BackgroundColor="#4E3689"
				   CornerRadius="12"
				   BorderColor="#4E3689"
				   HeightRequest="150"
				   WidthRequest="170"
				   HorizontalOptions="Center"
				   VerticalOptions="Center"
				   Padding="0"
				   HasShadow="False">

                    <Grid VerticalOptions="Center" HorizontalOptions="Center">
                        <VerticalStackLayout>
                            <Entry HorizontalTextAlignment="Center"
						           VerticalTextAlignment="Center"
						           TextColor="White"
                                   Text="{Binding Date, StringFormat='{0}'}" 
                                   FontSize="25" 
                                   Placeholder="yyyy-MM-dd"
                                   PlaceholderColor="Gray"/>
                            <Label Text="Date"
	                                FontSize="18"
	                                TextColor="White"
	                                HorizontalOptions="Center" />
                        </VerticalStackLayout>
                    </Grid>
                </Frame>

                <!-- Grade Box -->
                <Frame Grid.Row="1" Grid.Column="1"
				       BackgroundColor="#4E3689"
				       CornerRadius="12"
				       BorderColor="#4E3689"
				       HeightRequest="150"
				       WidthRequest="170"
				       HorizontalOptions="Center"
				       VerticalOptions="Center"
				       Padding="0"
				       HasShadow="False">

                    <Grid VerticalOptions="Center" HorizontalOptions="Center">
                      
                        <VerticalStackLayout >
                            <Picker Title ="Select"
                                    ItemsSource="{Binding diffeculties}"
                                    SelectedItem="{Binding Grade}"
                                    TitleColor="Gray"
                                    TextColor="White"
                                    BackgroundColor="#4E3689"
                                    FontSize="25"/>
                            <Label Text="Grade"
							   FontSize="18"
							   TextColor="White"
							   HorizontalOptions="Center" />
                        </VerticalStackLayout>

                    </Grid>
                </Frame>




            </Grid>

            <!-- Description -->
            <Frame BackgroundColor="White"
               CornerRadius="15"
               Padding="20"
			   WidthRequest="340"
               HasShadow="False"
               VerticalOptions="Start"
                   Margin="0,0,0,30">

                <VerticalStackLayout Spacing="10">

                    <Editor Text="{Binding Description}"
						TextColor="#4E3689"
						FontSize="16"
						AutoSize="TextChanges"
						HeightRequest="100"
						BackgroundColor="Transparent"
                        VerticalOptions="StartAndExpand"
                        Placeholder="A lovely run"/>
                </VerticalStackLayout>
            </Frame>



        <Button Text="Start Tracking Automatically"
                 Command="{Binding StartTrackingCommand}"
                 BackgroundColor="DarkViolet"
                TextColor="White"
                CornerRadius="10" 
                IsVisible="{Binding StartButtonVisible}"/>
        <Button Text="Stop Tracking"
                 Command="{Binding StopTrackingCommand}"
                BackgroundColor="Gray"
                TextColor="White"
                CornerRadius="10"
                IsVisible="{Binding StopButtonVisible}"/>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>




