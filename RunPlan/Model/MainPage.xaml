<?xml version="1.0" encoding="utf-8" ?>

    

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:sfChart="clr-namespace:Syncfusion.Maui.Charts;assembly=Syncfusion.Maui.Charts"  
             x:Class="RunPlan.Model.MainPage"
             xmlns:viewModel="clr-namespace:RunPlan.ViewModel"
             BackgroundColor="White">    <!--Background color-->
    
    
   
    

    <ScrollView>
        
        
        <VerticalStackLayout Padding="30,0" Spacing="25">
            <!-- Dashboard title -->
            <Label Text="Dashboard"
                   FontSize="Large"
                   FontAttributes="Bold"
                   TextColor="MediumPurple"
                   HorizontalOptions="Start"
                   />


            <!-- Last activity box -->
            <Border BackgroundColor="MediumPurple"
                Padding="15"
                StrokeShape="RoundRectangle 20"
                HorizontalOptions="Fill"
                VerticalOptions="Start" >
                        <Border.Shadow>
                            <Shadow Brush="Black" Opacity="0.5" Offset="5,5" />
                        </Border.Shadow>


                <Grid RowDefinitions="Auto,Auto" ColumnDefinitions="*,*,*" Padding="5">
                    <!-- Box Title -->
                    <Label Text="Last Activity" 
                       FontAttributes="Bold" 
                       FontSize="18"
                       Grid.Row="0"
                       Grid.ColumnSpan="3"
                       HorizontalOptions="Start" />

                    <!-- Name -->
                    <Label x:Name="LastActivityName" 
                       Text="Evening Run" 
                       FontFamily="Arial"
                       Grid.Row="1" 
                       Grid.Column="0"
                       HorizontalOptions="Start" />

                    <!-- Distance -->
                    <Label x:Name="LastActivityDistance" 
                       Text="10 km" 
                       FontFamily="Arial"
                       Grid.Row="1" 
                       Grid.Column="1"
                       HorizontalOptions="Start" />

                    <!-- Pace -->
                    <Label x:Name="LastActivityPace" 
                       Text="5:10 min/km"
                       FontFamily="Arial"
                       Grid.Row="1" 
                       Grid.Column="2"
                       HorizontalOptions="Center" />

                    <!-- Duration -->
                    <Label x:Name="LastActivityTime" 
                       Text="1h10min"
                       FontFamily="Arial"
                       Grid.Row="1" 
                       Grid.Column="3"
                       HorizontalOptions="End" />
                </Grid>
            </Border>


            
            

            <!-- This weeks running history box -->
            <Border BackgroundColor="MediumPurple"
              Padding="10"
              StrokeShape="RoundRectangle 20"
                
                HorizontalOptions="Fill"
              VerticalOptions="Start" >
                <Border.Shadow>
                    <Shadow Brush="MediumPurple" Opacity="0.5" Offset="5,5" />
                </Border.Shadow>

                <Border.Content>
                    <Grid RowDefinitions="Auto, Auto" ColumnDefinitions="Auto,*,Auto, Auto" Padding="5">

                        <!-- User Image -->
                        <Image Source="https://i.etsystatic.com/5661443/r/il/12424b/5227674592/il_1588xN.5227674592_216p.jpg"
                         WidthRequest="50"
                         HeightRequest="50"
                         BackgroundColor="Transparent"
                         Aspect="AspectFill"
                         Grid.Row="0"
                         Grid.Column="0"
                         Grid.RowSpan="2"
                         VerticalOptions="Center"
                         />


                        <!-- Box Title -->
                        <Label Text="Total running history for this week" 
                          FontAttributes="Bold" 
                          FontFamily="Arial"  
                          TextColor='White'
                          FontSize="18"
                          Grid.Row="0"
                          Grid.Column="1"
                          Grid.ColumnSpan="3"
                          HorizontalOptions="Start"
                          VerticalOptions="Start"
                          Padding="5" />

                        <!-- Distance -->
                        <Label x:Name="WeekActivityDistance" 
                          Text="55 km"
                          TextColor='White'     
                          FontFamily="Arial"
                          Grid.Row="1" 
                          Grid.Column="1"
                          HorizontalOptions="Start" />

                        <!-- Name -->
                        <Label x:Name="WeekActivityHours" 
                            Text="6h10min" 
                            TextColor='White'
                            FontFamily="Arial"
                            Grid.Row="1" 
                            Grid.Column="2"
                            VerticalOptions="Center"
                            HorizontalOptions="Start" />


                    </Grid>
                </Border.Content>
            </Border>






            <!-- Weekly Running Distance Graph -->
            <Border BackgroundColor="MediumPurple"
                    Padding="10"
                    StrokeShape="RoundRectangle 20"
                    HorizontalOptions="Fill"
                    VerticalOptions="Fill">

                <Border.Shadow>
                    <Shadow Brush="Black" Opacity="0.5" Offset="5,5" />
                </Border.Shadow>


                <Grid RowDefinitions="Auto, Auto, *, Auto"
                      ColumnDefinitions="*"
                      RowSpacing="10"
                      ColumnSpacing="0">

                    <Label Text="Three Months Overview"
                           FontAttributes="Bold"
                           FontSize="30"
                           TextColor="White"
                           HorizontalOptions="Center"
                           Padding="13" 
                           Grid.Row="0"/>

                    <GraphicsView x:Name="ChartCanvas"
                                  HeightRequest="300"
                                  Drawable="{Binding ChartDrawable}"
                                  BackgroundColor="Transparent"
                                  Grid.Row="2">
                        <GraphicsView.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnChartTapped" />
                        </GraphicsView.GestureRecognizers>
                    </GraphicsView>

                    <StackLayout x:Name="TooltipPanel"
                                 IsVisible="False"
                                 Padding="4"
                                 BackgroundColor="Transparent"
                                 Margin="20,80,0,0"
                                 HorizontalOptions="Start"
                                 VerticalOptions="Start"
                                 Spacing="6"
                                 Grid.Row="0">

                        <!-- Week Label -->
                        <Label x:Name="TooltipWeek"
                               Text="Week"
                               TextColor="White"
                               FontFamily="Arial"
                               FontAttributes="Bold"
                               FontSize="20"/>  

                        <!-- Labels Row -->
                        <Grid ColumnSpacing="30">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Label Text="Distance"
                                   TextColor="White"
                                   FontFamily="Arial"
                                   FontAttributes="Bold"
                                   Grid.Column="0"/>
                            <Label Text="Time"
                                   TextColor="White"
                                   FontAttributes="Bold"
                                   Grid.Column="1"/>    
                        </Grid>

                        <!-- Values Row -->
                        <Grid ColumnSpacing="50">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <Label x:Name="TooltipDistance"
                                   Text="0 km"
                                   TextColor="White"
                                   FontFamily="Arial"
                                   Grid.Column="0"/>
                            <Label x:Name="TooltipTime"
                                   Text="0:00"
                                   TextColor="White"
                                   FontFamily="Arial"
                                   Grid.Column="1"/>        
                        </Grid>
                    </StackLayout>

                </Grid>

            </Border>



            <!-- Input Fields -->
            <Entry x:Name="ActivityNameEntry" Placeholder="Enter activity name" />
            <Entry x:Name="DistanceEntry" Placeholder="Enter distance (km)" Keyboard="Numeric"/>
            <Entry x:Name="TimeEntry" Placeholder="Enter time (hh:mm:ss)" Keyboard="Text"/>
            <Entry x:Name="DateEntry" Placeholder="Enter date (yyyy-MM-dd)" Keyboard="Text"/>

            <!-- Button to Add Activity -->
            <Button Text="Add Activity" Clicked="OnAddActivityClicked" HorizontalOptions="Fill"/>

            <!-- Display Activities with Delete Buttons -->
            <CollectionView x:Name="ActivitiesCollectionView">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout Padding="10" Spacing="10">
                            <Label Text="{Binding Name}" VerticalOptions="Center"/>
                            <Label Text="{Binding Distance, StringFormat='{0} km'}" VerticalOptions="Center"/>
                            <Label Text="{Binding Time}" VerticalOptions="Center"/>
                            <Label Text="{Binding Date}" VerticalOptions="Center"/>

                            <!-- Delete Button -->
                            <Button Text="🗑" BackgroundColor="Red" TextColor="Black" 
                                    Clicked="OnDeleteActivityClicked" 
                                    CommandParameter="{Binding}" 
                                    HorizontalOptions="End"/>
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
   
    
    
 