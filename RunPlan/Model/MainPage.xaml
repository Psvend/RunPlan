<?xml version="1.0" encoding="utf-8" ?>

    

<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:sfChart="clr-namespace:Syncfusion.Maui.Charts;assembly=Syncfusion.Maui.Charts"  
             x:Class="RunPlan.Model.MainPage"
             xmlns:viewModel="clr-namespace:RunPlan.ViewModel"
             BackgroundColor="White">    <!--Background color-->
    
    
   
    

    <ScrollView>
        
        
        <VerticalStackLayout Padding="30,0" Spacing="25">
            <!-- Dashboard title -->
            <Label Text="Dashboard"
                   FontSize="Large"
                   FontAttributes="Bold"
                   TextColor="MediumPurple"
                   HorizontalOptions="Start"
                   />


            <!-- Last activity box -->
            <Border BackgroundColor="MediumPurple"
                Padding="15"
                StrokeShape="RoundRectangle 20"
                HorizontalOptions="Fill"
                VerticalOptions="Start" >
                        <Border.Shadow>
                            <Shadow Brush="Black" Opacity="0.5" Offset="5,5" />
                        </Border.Shadow>


                <Grid RowDefinitions="Auto,Auto" ColumnDefinitions="*,*,*" Padding="5">
                    <!-- Box Title -->
                    <Label Text="Last Activity" 
                       FontAttributes="Bold" 
                       FontSize="18"
                       Grid.Row="0"
                       Grid.ColumnSpan="3"
                       HorizontalOptions="Start" />

                    <!-- Name -->
                    <Label x:Name="LastActivityName" 
                       Text="Evening Run" 
                       FontAttributes="Bold"
                       Grid.Row="1" 
                       Grid.Column="0"
                       HorizontalOptions="Start" />

                    <!-- Distance -->
                    <Label x:Name="LastActivityDistance" 
                       Text="10 km" 
                       FontAttributes="Bold"
                       Grid.Row="1" 
                       Grid.Column="1"
                       HorizontalOptions="Start" />

                    <!-- Pace -->
                    <Label x:Name="LastActivityPace" 
                       Text="5:10 min/km"
                       FontAttributes="Bold"
                       Grid.Row="1" 
                       Grid.Column="2"
                       HorizontalOptions="Center" />

                    <!-- Duration -->
                    <Label x:Name="LastActivityTime" 
                       Text="1h10min"
                       FontAttributes="Bold"
                       Grid.Row="1" 
                       Grid.Column="3"
                       HorizontalOptions="End" />
                </Grid>
            </Border>


            
            

            <!-- This weeks running history box -->
            <Border BackgroundColor="MediumPurple"
              Padding="10"
              StrokeShape="RoundRectangle 20"
                
                HorizontalOptions="Fill"
              VerticalOptions="Start" >
                <Border.Shadow>
                    <Shadow Brush="Black" Opacity="0.5" Offset="5,5" />
                </Border.Shadow>

                <Border.Content>
                    <Grid RowDefinitions="Auto, Auto" ColumnDefinitions="Auto,*,Auto, Auto" Padding="5">

                        <!-- User Image -->
                        <Image Source="https://i.etsystatic.com/5661443/r/il/12424b/5227674592/il_1588xN.5227674592_216p.jpg"
                         WidthRequest="50"
                         HeightRequest="50"
                         BackgroundColor="Transparent"
                         Aspect="AspectFill"
                         Grid.Row="0"
                         Grid.Column="0"
                         Grid.RowSpan="2"
                         VerticalOptions="Center"
                         />


                        <!-- Box Title -->
                        <Label Text="Total running history for this week" 
                          FontAttributes="Bold" 
                          FontFamily="OpenSansRegular"     
                          TextColor='DarkGrey'
                          FontSize="18"
                          Grid.Row="0"
                          Grid.Column="1"
                          Grid.ColumnSpan="3"
                          HorizontalOptions="Start"
                          VerticalOptions="Start"
                          Padding="5" />

                        <!-- Distance -->
                        <Label x:Name="WeekActivityDistance" 
                          Text="55 km"
                          TextColor='DarkGrey'     
                          FontAttributes="Bold"
                          Grid.Row="1" 
                          Grid.Column="1"
                          HorizontalOptions="Start" />

                        <!-- Name -->
                        <Label x:Name="WeekActivityHours" 
                            Text="6h10min" 
                            TextColor='DarkGrey'
                            FontAttributes="Bold"
                            Grid.Row="1" 
                            Grid.Column="2"
                            VerticalOptions="Center"
                            HorizontalOptions="Start" />


                    </Grid>
                </Border.Content>
            </Border>






            <!-- Weekly Running Distance Graph -->
            <Border BackgroundColor="MediumPurple"
                    Padding="10"
                    StrokeShape="RoundRectangle 20"
                    HorizontalOptions="Fill"
                    VerticalOptions="Start">

                <Border.Shadow>
                    <Shadow Brush="Black" Opacity="0.5" Offset="5,5" />
                </Border.Shadow>

       
                <VerticalStackLayout Spacing="10">

                    <Label Text="Weekly Running Distance - Current Month"
                           FontAttributes="Bold"
                           FontSize="18"
                           TextColor="DarkGrey"
                           HorizontalOptions="Center"
                           Padding="5" />

                    <Label Text="Week of the Month"
                           FontSize="14"
                           FontAttributes="Bold"
                           HorizontalOptions="Center" />

                    <GraphicsView x:Name="ChartCanvas"
                      Drawable="{Binding ChartDrawable}"
                      HeightRequest="250"
                      WidthRequest="350"
                      BackgroundColor="Transparent">
                        <GraphicsView.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnChartTapped" />
                        </GraphicsView.GestureRecognizers>
                    </GraphicsView>

                    <Label x:Name="TooltipLabel"
                           Text=""
                           FontSize="14"
                           FontAttributes="Bold"
                           TextColor="White"
                           BackgroundColor="Black"
                           Padding="6"
                           HorizontalOptions="Center"
                           IsVisible="False"
                           Margin="0,5,0,0" />

                </VerticalStackLayout>

            </Border>



            <!-- Input Fields -->
            <Entry x:Name="ActivityNameEntry" Placeholder="Enter activity name" />
            <Entry x:Name="DistanceEntry" Placeholder="Enter distance (km)" Keyboard="Numeric"/>
            <Entry x:Name="TimeEntry" Placeholder="Enter time (hh:mm:ss)" Keyboard="Text"/>
            <Entry x:Name="DateEntry" Placeholder="Enter date (yyyy-MM-dd)" Keyboard="Text"/>

            <!-- Button to Add Activity -->
            <Button Text="Add Activity" Clicked="OnAddActivityClicked" HorizontalOptions="Fill"/>

            <!-- Display Activities with Delete Buttons -->
            <CollectionView x:Name="ActivitiesCollectionView">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout Padding="10" Spacing="10">
                            <Label Text="{Binding Name}" VerticalOptions="Center"/>
                            <Label Text="{Binding Distance, StringFormat='{0} km'}" VerticalOptions="Center"/>
                            <Label Text="{Binding Time}" VerticalOptions="Center"/>
                            <Label Text="{Binding Date}" VerticalOptions="Center"/>

                            <!-- Delete Button -->
                            <Button Text="🗑" BackgroundColor="Red" TextColor="Black" 
                                    Clicked="OnDeleteActivityClicked" 
                                    CommandParameter="{Binding}" 
                                    HorizontalOptions="End"/>
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
   
    
    
 